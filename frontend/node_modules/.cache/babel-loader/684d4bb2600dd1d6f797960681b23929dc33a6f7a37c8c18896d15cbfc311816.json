{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _toPropertyKey from \"@babel/runtime/helpers/toPropertyKey\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport sleep from 'sleep-promise';\nimport { getInitialCache } from './getInitialCache';\nimport { validateResponse } from './validateResponse';\nexport var requestOptions = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(caller, paramsRef, optionsCacheRef, debounceTimeout, setOptionsCache, reduceOptions) {\n    var currentInputValue, isCacheEmpty, currentOptions, newInputValue, response, hasError, loadOptions, _response, options, hasMore, newAdditional;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            currentInputValue = paramsRef.current.inputValue;\n            isCacheEmpty = !optionsCacheRef.current[currentInputValue];\n            currentOptions = isCacheEmpty ? getInitialCache(paramsRef.current) : optionsCacheRef.current[currentInputValue];\n            if (!(currentOptions.isLoading || !currentOptions.hasMore)) {\n              _context.next = 5;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 5:\n            setOptionsCache(function (prevOptionsCache) {\n              return _objectSpread(_objectSpread({}, prevOptionsCache), {}, _defineProperty({}, currentInputValue, _objectSpread(_objectSpread({}, currentOptions), {}, {\n                isLoading: true\n              })));\n            });\n            if (!(debounceTimeout > 0 && caller === 'input-change')) {\n              _context.next = 13;\n              break;\n            }\n            _context.next = 9;\n            return sleep(debounceTimeout);\n          case 9:\n            newInputValue = paramsRef.current.inputValue;\n            if (!(currentInputValue !== newInputValue)) {\n              _context.next = 13;\n              break;\n            }\n            setOptionsCache(function (prevOptionsCache) {\n              if (isCacheEmpty) {\n                var itemForDelete = prevOptionsCache[currentInputValue],\n                  restCache = _objectWithoutProperties(prevOptionsCache, [currentInputValue].map(_toPropertyKey));\n                return restCache;\n              }\n              return _objectSpread(_objectSpread({}, prevOptionsCache), {}, _defineProperty({}, currentInputValue, _objectSpread(_objectSpread({}, currentOptions), {}, {\n                isLoading: false\n              })));\n            });\n            return _context.abrupt(\"return\");\n          case 13:\n            hasError = false;\n            _context.prev = 14;\n            loadOptions = paramsRef.current.loadOptions;\n            _context.next = 18;\n            return loadOptions(currentInputValue, currentOptions.options, currentOptions.additional);\n          case 18:\n            response = _context.sent;\n            _context.next = 24;\n            break;\n          case 21:\n            _context.prev = 21;\n            _context.t0 = _context[\"catch\"](14);\n            hasError = true;\n          case 24:\n            if (!hasError) {\n              _context.next = 27;\n              break;\n            }\n            setOptionsCache(function (prevOptionsCache) {\n              return _objectSpread(_objectSpread({}, prevOptionsCache), {}, _defineProperty({}, currentInputValue, _objectSpread(_objectSpread({}, currentOptions), {}, {\n                isLoading: false\n              })));\n            });\n            return _context.abrupt(\"return\");\n          case 27:\n            if (validateResponse(response)) {\n              _response = response, options = _response.options, hasMore = _response.hasMore; // eslint-disable-next-line no-prototype-builtins\n\n              newAdditional = response.hasOwnProperty('additional') ? response.additional : currentOptions.additional;\n              setOptionsCache(function (prevOptionsCache) {\n                return _objectSpread(_objectSpread({}, prevOptionsCache), {}, _defineProperty({}, currentInputValue, _objectSpread(_objectSpread({}, currentOptions), {}, {\n                  options: reduceOptions(currentOptions.options, options, newAdditional),\n                  hasMore: !!hasMore,\n                  isLoading: false,\n                  isFirstLoad: false,\n                  additional: newAdditional\n                })));\n              });\n            }\n          case 28:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[14, 21]]);\n  }));\n  return function requestOptions(_x, _x2, _x3, _x4, _x5, _x6) {\n    return _ref.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["_objectWithoutProperties","_toPropertyKey","_defineProperty","_objectSpread","_asyncToGenerator","_regeneratorRuntime","sleep","getInitialCache","validateResponse","requestOptions","_ref","mark","_callee","caller","paramsRef","optionsCacheRef","debounceTimeout","setOptionsCache","reduceOptions","currentInputValue","isCacheEmpty","currentOptions","newInputValue","response","hasError","loadOptions","_response","options","hasMore","newAdditional","wrap","_callee$","_context","prev","next","current","inputValue","isLoading","abrupt","prevOptionsCache","itemForDelete","restCache","map","additional","sent","t0","hasOwnProperty","isFirstLoad","stop","_x","_x2","_x3","_x4","_x5","_x6","apply","arguments"],"sources":["C:/Users/matth/OneDrive - Groupe INSEEC (POCE)/IngÃ© 4/web/projet/PROJECT_WEB_OCRES/frontend/node_modules/react-select-async-paginate/es/requestOptions.js"],"sourcesContent":["import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\r\nimport _toPropertyKey from \"@babel/runtime/helpers/toPropertyKey\";\r\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\r\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\r\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\r\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\r\nimport sleep from 'sleep-promise';\r\nimport { getInitialCache } from './getInitialCache';\r\nimport { validateResponse } from './validateResponse';\r\nexport var requestOptions = /*#__PURE__*/function () {\r\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(caller, paramsRef, optionsCacheRef, debounceTimeout, setOptionsCache, reduceOptions) {\r\n    var currentInputValue, isCacheEmpty, currentOptions, newInputValue, response, hasError, loadOptions, _response, options, hasMore, newAdditional;\r\n\r\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\r\n      while (1) {\r\n        switch (_context.prev = _context.next) {\r\n          case 0:\r\n            currentInputValue = paramsRef.current.inputValue;\r\n            isCacheEmpty = !optionsCacheRef.current[currentInputValue];\r\n            currentOptions = isCacheEmpty ? getInitialCache(paramsRef.current) : optionsCacheRef.current[currentInputValue];\r\n\r\n            if (!(currentOptions.isLoading || !currentOptions.hasMore)) {\r\n              _context.next = 5;\r\n              break;\r\n            }\r\n\r\n            return _context.abrupt(\"return\");\r\n\r\n          case 5:\r\n            setOptionsCache(function (prevOptionsCache) {\r\n              return _objectSpread(_objectSpread({}, prevOptionsCache), {}, _defineProperty({}, currentInputValue, _objectSpread(_objectSpread({}, currentOptions), {}, {\r\n                isLoading: true\r\n              })));\r\n            });\r\n\r\n            if (!(debounceTimeout > 0 && caller === 'input-change')) {\r\n              _context.next = 13;\r\n              break;\r\n            }\r\n\r\n            _context.next = 9;\r\n            return sleep(debounceTimeout);\r\n\r\n          case 9:\r\n            newInputValue = paramsRef.current.inputValue;\r\n\r\n            if (!(currentInputValue !== newInputValue)) {\r\n              _context.next = 13;\r\n              break;\r\n            }\r\n\r\n            setOptionsCache(function (prevOptionsCache) {\r\n              if (isCacheEmpty) {\r\n                var itemForDelete = prevOptionsCache[currentInputValue],\r\n                    restCache = _objectWithoutProperties(prevOptionsCache, [currentInputValue].map(_toPropertyKey));\r\n\r\n                return restCache;\r\n              }\r\n\r\n              return _objectSpread(_objectSpread({}, prevOptionsCache), {}, _defineProperty({}, currentInputValue, _objectSpread(_objectSpread({}, currentOptions), {}, {\r\n                isLoading: false\r\n              })));\r\n            });\r\n            return _context.abrupt(\"return\");\r\n\r\n          case 13:\r\n            hasError = false;\r\n            _context.prev = 14;\r\n            loadOptions = paramsRef.current.loadOptions;\r\n            _context.next = 18;\r\n            return loadOptions(currentInputValue, currentOptions.options, currentOptions.additional);\r\n\r\n          case 18:\r\n            response = _context.sent;\r\n            _context.next = 24;\r\n            break;\r\n\r\n          case 21:\r\n            _context.prev = 21;\r\n            _context.t0 = _context[\"catch\"](14);\r\n            hasError = true;\r\n\r\n          case 24:\r\n            if (!hasError) {\r\n              _context.next = 27;\r\n              break;\r\n            }\r\n\r\n            setOptionsCache(function (prevOptionsCache) {\r\n              return _objectSpread(_objectSpread({}, prevOptionsCache), {}, _defineProperty({}, currentInputValue, _objectSpread(_objectSpread({}, currentOptions), {}, {\r\n                isLoading: false\r\n              })));\r\n            });\r\n            return _context.abrupt(\"return\");\r\n\r\n          case 27:\r\n            if (validateResponse(response)) {\r\n              _response = response, options = _response.options, hasMore = _response.hasMore; // eslint-disable-next-line no-prototype-builtins\r\n\r\n              newAdditional = response.hasOwnProperty('additional') ? response.additional : currentOptions.additional;\r\n              setOptionsCache(function (prevOptionsCache) {\r\n                return _objectSpread(_objectSpread({}, prevOptionsCache), {}, _defineProperty({}, currentInputValue, _objectSpread(_objectSpread({}, currentOptions), {}, {\r\n                  options: reduceOptions(currentOptions.options, options, newAdditional),\r\n                  hasMore: !!hasMore,\r\n                  isLoading: false,\r\n                  isFirstLoad: false,\r\n                  additional: newAdditional\r\n                })));\r\n              });\r\n            }\r\n\r\n          case 28:\r\n          case \"end\":\r\n            return _context.stop();\r\n        }\r\n      }\r\n    }, _callee, null, [[14, 21]]);\r\n  }));\r\n\r\n  return function requestOptions(_x, _x2, _x3, _x4, _x5, _x6) {\r\n    return _ref.apply(this, arguments);\r\n  };\r\n}();"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}